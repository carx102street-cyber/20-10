<!--
  File: letter.html (phi√™n b·∫£n ho√†n ch·ªânh: Th∆∞ 3D n·ªÅn h·ªìng s√°ng nh·∫π + gi·∫•y ch·∫•m bi + ch·ªØ hi·ªán d·∫ßn + √°nh s√°ng th∆∞ theo nh·∫°c)
-->
<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Th∆∞ 20/10 üíå</title>
<style>
body{
  background:radial-gradient(circle at center,#ffd7e8 0%,#ffb6d9 60%,#ff8cc7 100%);
  margin:0;height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;font-family:'Poppins',sans-serif;color:#6b0736
}
.envelope{position:relative;width:340px;height:220px;cursor:pointer;transform-style:preserve-3d}
.flap{position:absolute;left:0;right:0;top:-6px;height:120px;background:#ff8cc7;border-radius:14px;clip-path:polygon(0 0,100% 0,50% 56%);transform-origin:center top;transition:transform 1s cubic-bezier(.2,.9,.2,1)}
.body{position:absolute;inset:0;background:#ffb6d9;border-radius:14px;box-shadow:0 24px 50px rgba(0,0,0,0.18)}
.paper{position:absolute;left:50%;top:36px;transform:translateX(-50%);width:280px;height:180px;background:#ffe6f6;border:2px solid #ff9fcf;border-radius:10px;padding:20px;opacity:0;transition:transform 1s ease,opacity .6s ease;background-image:radial-gradient(#ff9fcf 1.5px,transparent 1.5px);background-size:18px 18px;box-shadow:0 0 0 #ff9fcf}
.paper.open{opacity:1;transform:translateX(-50%) translateY(-90px);animation:glow 2s ease-in-out infinite alternate}
@keyframes glow{from{box-shadow:0 0 10px rgba(255,150,200,.5)}to{box-shadow:0 0 25px rgba(255,160,210,.8)}}
.line{opacity:0;transform:translateY(8px);transition:opacity .6s ease,transform .6s ease;color:#ff3b8f;text-align:center;font-size:15px;line-height:1.6}
.line.visible{opacity:1;transform:translateY(0)}
.envelope.open .flap{transform:rotateX(-180deg)}
</style>
</head>
<body>
<div class="envelope" id="envelope">
  <div class="body"></div>
  <div class="flap"></div>
  <div class="paper" id="paper">
    <div id="message">
      <div class="line">üíå</div>
      <div class="line">Ch√∫c ch·ªã 20/10 vui v·∫ª, ng·∫≠p tr√†n ni·ªÅm vui v√† h·∫°nh ph√∫c</div>
      <div class="line">v√† ng√†y n√†o c≈©ng l√† baby boo üíêüíù</div>
    </div>
  </div>
</div>

<audio id="bgm" preload="auto" loop>
  <source src="https://drive.google.com/uc?export=download&id=1nYDgJqFkfPLVdRciF9TZP3m9-w2kXUey" type="audio/mpeg">
</audio>

<script>
const envelope=document.getElementById('envelope');
const paper=document.getElementById('paper');
const lines=document.querySelectorAll('.line');
const audio=document.getElementById('bgm');
let opened=false;

envelope.addEventListener('click',()=>{
  if(opened) return; opened=true;
  envelope.classList.add('open');
  setTimeout(()=>{
    paper.classList.add('open');
    lines.forEach((l,i)=>setTimeout(()=>l.classList.add('visible'),i*700));
    audio.play().catch(()=>console.log('Autoplay b·ªã ch·∫∑n'));
    startLightEffect();
  },700);
});

function startLightEffect(){
  let brightness=0;
  let increasing=true;
  setInterval(()=>{
    if(increasing){ brightness+=0.02; if(brightness>=0.4) increasing=false; }
    else { brightness-=0.02; if(brightness<=0.1) increasing=true; }
    paper.style.boxShadow=`0 0 30px ${Math.floor(255*brightness)},0 0 60px rgba(255,150,200,${brightness})`;
    paper.style.filter=`brightness(${1+brightness})`;
  },50);
}
</script>
</body>
</html>
